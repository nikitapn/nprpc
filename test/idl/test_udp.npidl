// Test UDP interface support
module test_udp;

message Vec3 {
  x: f32;
  y: f32;
  z: f32;
}

message Quaternion {
  x: f32;
  y: f32;
  z: f32;
  w: f32;
}

exception SyncError {
  message: string;
  code: i32;
}

[udp]
interface GameSync {
  // Unreliable, no reply
  [unreliable]
  async UpdatePosition(player_id: u32, pos: Vec3, rot: Quaternion);
  [unreliable]
  async FireWeapon(player_id: u32, weapon_id: u8, direction: Vec3);
  [unreliable]
  async PlaySound(sound_id: u16, position: Vec3, volume: f32);

  // Reliable UDP - needs ACK, can have return value and throw
  boolean ApplyDamage(target_id: u32, amount: i32) raises(SyncError);

  u64 SpawnEntity(entity_type: u16, position: Vec3);

  async SpawnEntity1(entity_type: u16, position: Vec3);
}
