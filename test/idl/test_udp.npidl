// Test UDP interface support
module test_udp;

message Vec3 {
  x: f32;
  y: f32;
  z: f32;
}

message Quaternion {
  x: f32;
  y: f32;
  z: f32;
  w: f32;
}

exception SyncError {
  message: string;
  code: i32;
}

[udp]
interface GameSync {
  // Unreliable, no reply (default for UDP)
  [unreliable]
  async UpdatePosition(player_id: in u32, pos: in Vec3, rot: in Quaternion);
  [unreliable]
  async FireWeapon(player_id: in u32, weapon_id: in u8, direction: in Vec3);
  [unreliable]
  async PlaySound(sound_id: in u16, position: in Vec3, volume: in f32);

  // Reliable UDP - needs ACK, can have return value and throw
  boolean ApplyDamage(target_id: in u32, amount: in i32) raises(SyncError);

  u64 SpawnEntity(entity_type: in u16, position: in Vec3);

  async SpawnEntity1(entity_type: in u16, position: in Vec3);
}
